<!doctype html><html><head><meta charset="utf - 8"><title>汉诺塔VII</title><link rel="stylesheet" href="../../stylesheets/timu.css" ></head>

<body>
<h1>汉诺塔VII</h1>
<p id="title">n个盘子的汉诺塔问题的最少移动次数是2^n-1,即在移动过程中会产生2^n个系列。由于发生错移产生的系列就增加了，这种错误是放错了柱子，并不会把大盘放到小盘上，即各柱子从下往上的大小仍保持如下关系 ： <br>n=m+p+q<br>a1&gt;a2&gt;...&gt;am<br>b1&gt;b2&gt;...&gt;bp<br>c1&gt;c2&gt;...&gt;cq<br>ai是A柱上的盘的盘号系列，bi是B柱上的盘的盘号系列， ci是C柱上的盘的盘号系列，最初目标是将A柱上的n个盘子移到C盘. 给出1个系列，判断它是否是在正确的移动中产生的系列.<br>例1：n=3<br>3<br>2<br>1<br>是正确的<br>例2：n=3<br>3<br>1<br>2<br>是不正确的。<br>注：对于例2如果目标是将A柱上的n个盘子移到B盘. 则是正确的.<br> </p>
<h3 onclick="change_visible('input')">Input</h3>
<p id="input">包含多组数据，首先输入T,表示有T组数据.每组数据4行，第1行N是盘子的数目N&lt;=64.<br>后3行如下<br>m a1 a2 ...am<br>p b1 b2 ...bp<br>q c1 c2 ...cq<br>N=m+p+q,0&lt;=m&lt;=N,0&lt;=p&lt;=N,0&lt;=q&lt;=N,<br> </p>
<h3 onclick="change_visible('output')">Output</h3>
<p id="output">            对于每组数据，判断它是否是在正确的移动中产生的系列.正确输出true，否则false<br> </p>
<h3 onclick="change_visible('sample_input')">Sample Input</h3>
<p id="sample_input">6<br>3<br>1 3<br>1 2<br>1 1<br>3<br>1 3<br>1 1<br>1 2<br>6<br>3 6 5 4<br>1 1<br>2 3 2<br>6<br>3 6 5 4<br>2 3 2<br>1 1<br>3<br>1 3<br>1 2<br>1 1<br>20<br>2 20 17<br>2 19 18<br>16 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1<br> </p>
<h3 onclick="change_visible('sample_output')">Sample Output</h3>
<p id="sample_output">true<br>false<br>false<br>false<br>true<br>true</p>
<h3 onclick="change_visible('code1')">code</h3>
<div id="code1" class="codearea">
<div class="lineodd"><code></code><code class="keyword">#include</code><code>&lt;iostream&gt;</code></div><div class="lineeven"><code></code><code class="keyword">using</code><code>&nbsp;</code><code class="keyword">namespace</code><code>&nbsp;std;</code></div><div class="lineodd"><code></code><code class="keyword">bool</code><code>&nbsp;solve(</code><code class="keyword">int</code><code>&nbsp;start,</code><code class="keyword">int</code><code>&nbsp;end,int&&nbsp;p1,int&&nbsp;p2,int&&nbsp;p3,</code><code class="keyword">int</code><code>&nbsp;pol[3][64],</code><code class="keyword">int</code><code>&nbsp;n){</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code><code>(n==0)</code><code class="keyword">return</code><code>&nbsp;1;</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code><code>&nbsp;place=-1;</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code><code>(p1&gt;0&&pol[0][p1-1]==n){</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;place=0;</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p1</code><code class="keyword">--</code><code>;</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">else</code><code>&nbsp;</code><code class="keyword">if</code><code>(p2&gt;0&&pol[1][p2-1]==n){</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;place=1;</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p2</code><code class="keyword">--</code><code>;</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">else</code><code>&nbsp;</code><code class="keyword">if</code><code>(p3&gt;0&&pol[2][p3-1]==n){</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;place=2;</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p3</code><code class="keyword">--</code><code>;</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code><code>(start==place)</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code><code>&nbsp;solve(start,3-end-start,p1,p2,p3,pol,n-1);</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code><code>(end==place)</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code><code>&nbsp;solve(3-end-start,end,p1,p2,p3,pol,n-1);</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code><code>&nbsp;0;</code></div><div class="lineodd"><code>}</code></div><div class="lineeven"><code></code></div><div class="lineodd"><code></code></div><div class="lineeven"><code></code><code class="keyword">int</code><code>&nbsp;main(){</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code><code>&nbsp;t;</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code><code>&nbsp;pol[3][64];</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">while</code><code>(cin&gt;&gt;t){</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">while</code><code>(t</code><code class="keyword">--</code><code>){</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code><code>&nbsp;n;</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin&gt;&gt;n;</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">int</code><code>&nbsp;p1,p2,p3;</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin&gt;&gt;p1;</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">for</code><code>(</code><code class="keyword">int</code><code>&nbsp;i=p1-1;i&gt;=0;i</code><code class="keyword">--</code><code>)</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin&gt;&gt;pol[0][i];</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin&gt;&gt;p2;</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">for</code><code>(</code><code class="keyword">int</code><code>&nbsp;i=p2-1;i&gt;=0;i</code><code class="keyword">--</code><code>)</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin&gt;&gt;pol[1][i];</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin&gt;&gt;p3;</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">for</code><code>(</code><code class="keyword">int</code><code>&nbsp;i=p3-1;i&gt;=0;i</code><code class="keyword">--</code><code>)</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cin&gt;&gt;pol[2][i];</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code><code>(solve(0,2,p1,p2,p3,pol,n))</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;"true\n";</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">else</code><code></code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;"false\n";</code></div><div class="lineodd"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code></div><div class="lineeven"><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code></div><div class="lineodd"><code>}</code></div>
</div>
</body><script src = "../../javascripts/functions.js" ></script ></html>